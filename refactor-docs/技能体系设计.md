# ğŸ¯ é‡æ„å·¥ä½œæµæŠ€èƒ½ä½“ç³»è®¾è®¡

## é—®é¢˜åˆ†æ

### å½“å‰é—®é¢˜

**é—®é¢˜æè¿°**ï¼š
åœ¨åç«¯é‡æ„å®æ–½é˜¶æ®µï¼Œå¦‚æœæ²¡æœ‰ `nestjs-best-practices` æˆ– `nestjs-ddd-patterns` è¿™æ ·çš„æŠ€èƒ½æ¥çº¦æŸä»£ç è¾“å‡ºï¼ŒAI å¯èƒ½ä¼šï¼š
- âŒ ç”Ÿæˆä¸ç¬¦åˆ NestJS æœ€ä½³å®è·µçš„ä»£ç 
- âŒ æ¨¡å—ç»“æ„æ··ä¹±ï¼Œä¸éµå¾ª DDD åˆ†å±‚
- âŒ ä¾èµ–æ³¨å…¥ä½¿ç”¨ä¸å½“
- âŒ è£…é¥°å™¨ä½¿ç”¨ä¸è§„èŒƒ
- âŒ ç¼ºå°‘å¿…è¦çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- âŒ æµ‹è¯•ä»£ç ä¸å®Œæ•´æˆ–ä¸è§„èŒƒ

**æ ¹æœ¬åŸå› **ï¼š
ç¼ºå°‘**æŠ€èƒ½çº¦æŸå±‚**ï¼Œå¯¼è‡´ä»£ç è¾“å‡ºæ²¡æœ‰æ ‡å‡†å’Œè§„èŒƒã€‚

---

## è§£å†³æ–¹æ¡ˆï¼šæ„å»ºæŠ€èƒ½ä½“ç³»

### æŠ€èƒ½åˆ†ç±»

```mermaid
graph TB
    A[é‡æ„æŠ€èƒ½ä½“ç³»] --> B[åˆ†æç±»æŠ€èƒ½]
    A --> C[è®¾è®¡ç±»æŠ€èƒ½]
    A --> D[å®æ–½ç±»æŠ€èƒ½]
    A --> E[éªŒè¯ç±»æŠ€èƒ½]
    
    B --> B1[analyzing-projects]
    B --> B2[code-analyzer]
    B --> B3[dependency-analyzer]
    
    C --> C1[smart-docs]
    C --> C2[architecture-designer]
    C --> C3[api-designer]
    
    D --> D1[nestjs-best-practices]
    D --> D2[nestjs-ddd-patterns]
    D --> D3[vue3-composition-patterns]
    D --> D4[typescript-strict-mode]
    
    E --> E1[test-generator]
    E --> E2[code-reviewer]
    E --> E3[performance-analyzer]
```

---

## æ ¸å¿ƒæŠ€èƒ½å®šä¹‰

### 1. NestJS æœ€ä½³å®è·µæŠ€èƒ½

**æŠ€èƒ½åç§°**: `nestjs-best-practices`

**ä½œç”¨**: ç¡®ä¿ç”Ÿæˆçš„ NestJS ä»£ç ç¬¦åˆå®˜æ–¹æœ€ä½³å®è·µ

**çº¦æŸè§„åˆ™**:

#### 1.1 æ¨¡å—ç»“æ„è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„æ¨¡å—ç»“æ„
src/modules/drama/
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ drama.controller.ts          // æ§åˆ¶å™¨
â”œâ”€â”€ services/
â”‚   â””â”€â”€ drama.service.ts              // ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ repositories/
â”‚   â””â”€â”€ drama.repository.ts           // æ•°æ®è®¿é—®
â”œâ”€â”€ entities/
â”‚   â””â”€â”€ drama.entity.ts               // å®ä½“å®šä¹‰
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ create-drama.dto.ts           // åˆ›å»º DTO
â”‚   â”œâ”€â”€ update-drama.dto.ts           // æ›´æ–° DTO
â”‚   â””â”€â”€ drama-response.dto.ts         // å“åº” DTO
â”œâ”€â”€ interfaces/
â”‚   â””â”€â”€ drama.interface.ts            // æ¥å£å®šä¹‰
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ drama.constants.ts            // å¸¸é‡å®šä¹‰
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ drama.controller.spec.ts      // æ§åˆ¶å™¨æµ‹è¯•
â”‚   â””â”€â”€ drama.service.spec.ts         // æœåŠ¡æµ‹è¯•
â””â”€â”€ drama.module.ts                   // æ¨¡å—å®šä¹‰

// âŒ é”™è¯¯çš„ç»“æ„
src/drama/
â”œâ”€â”€ drama.ts                          // æ‰€æœ‰ä»£ç æ··åœ¨ä¸€èµ·
â””â”€â”€ drama-test.ts
```

#### 1.2 ä¾èµ–æ³¨å…¥è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„ä¾èµ–æ³¨å…¥
@Injectable()
export class DramaService {
  constructor(
    @InjectRepository(Drama)
    private readonly dramaRepository: Repository<Drama>,
    private readonly logger: Logger,
    private readonly configService: ConfigService,
  ) {}
}

// âŒ é”™è¯¯çš„ä¾èµ–æ³¨å…¥
export class DramaService {
  private dramaRepository = new Repository(); // ç›´æ¥ new
}
```

#### 1.3 è£…é¥°å™¨ä½¿ç”¨è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„è£…é¥°å™¨ä½¿ç”¨
@Controller('dramas')
@ApiTags('dramas')
@UseGuards(JwtAuthGuard)
export class DramaController {
  @Post()
  @ApiOperation({ summary: 'Create drama' })
  @ApiResponse({ status: 201, type: DramaResponseDto })
  @UsePipes(new ValidationPipe())
  async create(@Body() dto: CreateDramaDto): Promise<DramaResponseDto> {
    return this.dramaService.create(dto);
  }
}

// âŒ é”™è¯¯çš„è£…é¥°å™¨ä½¿ç”¨
export class DramaController {
  create(dto: any) { // ç¼ºå°‘è£…é¥°å™¨å’Œç±»å‹
    return this.dramaService.create(dto);
  }
}
```

#### 1.4 å¼‚å¸¸å¤„ç†è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„å¼‚å¸¸å¤„ç†
@Injectable()
export class DramaService {
  async findOne(id: string): Promise<Drama> {
    const drama = await this.dramaRepository.findOne({ where: { id } });
    
    if (!drama) {
      throw new NotFoundException(`Drama with ID ${id} not found`);
    }
    
    return drama;
  }
  
  async create(dto: CreateDramaDto): Promise<Drama> {
    try {
      return await this.dramaRepository.save(dto);
    } catch (error) {
      this.logger.error(`Failed to create drama: ${error.message}`, error.stack);
      throw new InternalServerErrorException('Failed to create drama');
    }
  }
}

// âŒ é”™è¯¯çš„å¼‚å¸¸å¤„ç†
async findOne(id: string) {
  return await this.dramaRepository.findOne({ where: { id } }); // ä¸æ£€æŸ¥ null
}
```

#### 1.5 æ—¥å¿—è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„æ—¥å¿—ä½¿ç”¨
@Injectable()
export class DramaService {
  private readonly logger = new Logger(DramaService.name);
  
  async create(dto: CreateDramaDto): Promise<Drama> {
    this.logger.log(`Creating drama: ${dto.title}`);
    
    try {
      const drama = await this.dramaRepository.save(dto);
      this.logger.log(`Drama created successfully: ${drama.id}`);
      return drama;
    } catch (error) {
      this.logger.error(`Failed to create drama: ${error.message}`, error.stack);
      throw error;
    }
  }
}

// âŒ é”™è¯¯çš„æ—¥å¿—ä½¿ç”¨
async create(dto: CreateDramaDto) {
  console.log('creating...'); // ä½¿ç”¨ console.log
  return await this.dramaRepository.save(dto);
}
```

#### 1.6 é…ç½®ç®¡ç†è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„é…ç½®ç®¡ç†
@Injectable()
export class DramaService {
  constructor(
    private readonly configService: ConfigService,
  ) {}
  
  getStoragePath(): string {
    return this.configService.get<string>('STORAGE_PATH');
  }
}

// âŒ é”™è¯¯çš„é…ç½®ç®¡ç†
const STORAGE_PATH = '/data/storage'; // ç¡¬ç¼–ç 
```

---

### 2. NestJS DDD æ¨¡å¼æŠ€èƒ½

**æŠ€èƒ½åç§°**: `nestjs-ddd-patterns`

**ä½œç”¨**: ç¡®ä¿ä»£ç éµå¾ª DDD åˆ†å±‚æ¶æ„

**çº¦æŸè§„åˆ™**:

#### 2.1 åˆ†å±‚æ¶æ„
```
API å±‚ (Presentation Layer)
â”œâ”€â”€ Controllers          # å¤„ç† HTTP è¯·æ±‚
â”œâ”€â”€ DTOs                # æ•°æ®ä¼ è¾“å¯¹è±¡
â””â”€â”€ Pipes/Guards        # éªŒè¯å’Œæˆæƒ

åº”ç”¨å±‚ (Application Layer)
â”œâ”€â”€ Services            # ä¸šåŠ¡é€»è¾‘ç¼–æ’
â”œâ”€â”€ Use Cases           # ç”¨ä¾‹å®ç°
â””â”€â”€ Application DTOs    # åº”ç”¨å±‚ DTO

é¢†åŸŸå±‚ (Domain Layer)
â”œâ”€â”€ Entities            # é¢†åŸŸå®ä½“
â”œâ”€â”€ Value Objects       # å€¼å¯¹è±¡
â”œâ”€â”€ Domain Services     # é¢†åŸŸæœåŠ¡
â”œâ”€â”€ Repositories        # ä»“å‚¨æ¥å£
â””â”€â”€ Domain Events       # é¢†åŸŸäº‹ä»¶

åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)
â”œâ”€â”€ Repositories Impl   # ä»“å‚¨å®ç°
â”œâ”€â”€ Database            # æ•°æ®åº“é…ç½®
â”œâ”€â”€ External Services   # å¤–éƒ¨æœåŠ¡
â””â”€â”€ Adapters            # é€‚é…å™¨
```

#### 2.2 å®ä½“å®šä¹‰è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„å®ä½“å®šä¹‰ï¼ˆé¢†åŸŸå±‚ï¼‰
@Entity('dramas')
export class Drama {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  title: string;

  @Column('text')
  description: string;

  @Column({ type: 'enum', enum: DramaStatus })
  status: DramaStatus;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // é¢†åŸŸæ–¹æ³•
  publish(): void {
    if (this.status !== DramaStatus.DRAFT) {
      throw new DomainException('Only draft dramas can be published');
    }
    this.status = DramaStatus.PUBLISHED;
  }

  archive(): void {
    this.status = DramaStatus.ARCHIVED;
  }
}

// âŒ é”™è¯¯çš„å®ä½“å®šä¹‰
export class Drama {
  id: string;
  title: string;
  // ç¼ºå°‘è£…é¥°å™¨ã€ç¼ºå°‘é¢†åŸŸæ–¹æ³•
}
```

#### 2.3 ä»“å‚¨æ¨¡å¼
```typescript
// âœ… æ­£ç¡®çš„ä»“å‚¨æ¨¡å¼

// 1. å®šä¹‰ä»“å‚¨æ¥å£ï¼ˆé¢†åŸŸå±‚ï¼‰
export interface IDramaRepository {
  findById(id: string): Promise<Drama | null>;
  findAll(options: FindOptions): Promise<Drama[]>;
  save(drama: Drama): Promise<Drama>;
  delete(id: string): Promise<void>;
}

// 2. å®ç°ä»“å‚¨ï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰
@Injectable()
export class DramaRepository implements IDramaRepository {
  constructor(
    @InjectRepository(Drama)
    private readonly repository: Repository<Drama>,
  ) {}

  async findById(id: string): Promise<Drama | null> {
    return this.repository.findOne({ where: { id } });
  }

  async save(drama: Drama): Promise<Drama> {
    return this.repository.save(drama);
  }
}

// 3. åœ¨æœåŠ¡ä¸­ä½¿ç”¨æ¥å£ï¼ˆåº”ç”¨å±‚ï¼‰
@Injectable()
export class DramaService {
  constructor(
    @Inject('IDramaRepository')
    private readonly dramaRepository: IDramaRepository,
  ) {}
}

// âŒ é”™è¯¯çš„ä»“å‚¨æ¨¡å¼
@Injectable()
export class DramaService {
  constructor(
    @InjectRepository(Drama)
    private readonly repository: Repository<Drama>, // ç›´æ¥ä¾èµ– TypeORM
  ) {}
}
```

#### 2.4 æœåŠ¡åˆ†å±‚
```typescript
// âœ… æ­£ç¡®çš„æœåŠ¡åˆ†å±‚

// é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰- å¤„ç†é¢†åŸŸé€»è¾‘
@Injectable()
export class DramaDomainService {
  validateDramaTitle(title: string): boolean {
    return title.length >= 3 && title.length <= 100;
  }

  calculateDramaDuration(scenes: Scene[]): number {
    return scenes.reduce((total, scene) => total + scene.duration, 0);
  }
}

// åº”ç”¨æœåŠ¡ï¼ˆApplication Serviceï¼‰- ç¼–æ’ä¸šåŠ¡æµç¨‹
@Injectable()
export class DramaService {
  constructor(
    @Inject('IDramaRepository')
    private readonly dramaRepository: IDramaRepository,
    private readonly dramaDomainService: DramaDomainService,
    private readonly eventBus: EventBus,
  ) {}

  async create(dto: CreateDramaDto): Promise<Drama> {
    // 1. éªŒè¯
    if (!this.dramaDomainService.validateDramaTitle(dto.title)) {
      throw new BadRequestException('Invalid drama title');
    }

    // 2. åˆ›å»ºå®ä½“
    const drama = new Drama();
    drama.title = dto.title;
    drama.description = dto.description;

    // 3. ä¿å­˜
    const savedDrama = await this.dramaRepository.save(drama);

    // 4. å‘å¸ƒé¢†åŸŸäº‹ä»¶
    this.eventBus.publish(new DramaCreatedEvent(savedDrama.id));

    return savedDrama;
  }
}

// âŒ é”™è¯¯çš„æœåŠ¡åˆ†å±‚
@Injectable()
export class DramaService {
  async create(dto: any) {
    // æ‰€æœ‰é€»è¾‘æ··åœ¨ä¸€èµ·
    const drama = await this.repository.save(dto);
    return drama;
  }
}
```

---

### 3. Vue 3 ç»„åˆå¼ API æ¨¡å¼æŠ€èƒ½

**æŠ€èƒ½åç§°**: `vue3-composition-patterns`

**ä½œç”¨**: ç¡®ä¿ Vue 3 ä»£ç ä½¿ç”¨ç»„åˆå¼ API æœ€ä½³å®è·µ

**çº¦æŸè§„åˆ™**:

#### 3.1 ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰
```typescript
// âœ… æ­£ç¡®çš„ Composable
// composables/useDrama.ts
export function useDrama() {
  const dramas = ref<Drama[]>([]);
  const loading = ref(false);
  const error = ref<Error | null>(null);

  const fetchDramas = async () => {
    loading.value = true;
    error.value = null;
    
    try {
      const response = await dramaApi.getAll();
      dramas.value = response.data;
    } catch (e) {
      error.value = e as Error;
    } finally {
      loading.value = false;
    }
  };

  const createDrama = async (dto: CreateDramaDto) => {
    loading.value = true;
    try {
      const response = await dramaApi.create(dto);
      dramas.value.push(response.data);
      return response.data;
    } catch (e) {
      error.value = e as Error;
      throw e;
    } finally {
      loading.value = false;
    }
  };

  return {
    dramas: readonly(dramas),
    loading: readonly(loading),
    error: readonly(error),
    fetchDramas,
    createDrama,
  };
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<script setup lang="ts">
const { dramas, loading, error, fetchDramas } = useDrama();

onMounted(() => {
  fetchDramas();
});
</script>

// âŒ é”™è¯¯çš„æ–¹å¼
export default {
  data() {
    return {
      dramas: [],
    };
  },
  methods: {
    fetchDramas() {
      // ä½¿ç”¨ Options API
    },
  },
};
```

#### 3.2 TypeScript ç±»å‹å®šä¹‰
```typescript
// âœ… æ­£ç¡®çš„ç±»å‹å®šä¹‰
// types/drama.ts
export interface Drama {
  id: string;
  title: string;
  description: string;
  status: DramaStatus;
  createdAt: string;
  updatedAt: string;
}

export enum DramaStatus {
  DRAFT = 'draft',
  PUBLISHED = 'published',
  ARCHIVED = 'archived',
}

export interface CreateDramaDto {
  title: string;
  description: string;
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<script setup lang="ts">
import type { Drama, CreateDramaDto } from '@/types/drama';

const drama = ref<Drama | null>(null);
const form = reactive<CreateDramaDto>({
  title: '',
  description: '',
});
</script>

// âŒ é”™è¯¯çš„ç±»å‹å®šä¹‰
const drama = ref(null); // æ²¡æœ‰ç±»å‹
const form = reactive({  // æ²¡æœ‰ç±»å‹
  title: '',
  description: '',
});
```

---

### 4. TypeScript ä¸¥æ ¼æ¨¡å¼æŠ€èƒ½

**æŠ€èƒ½åç§°**: `typescript-strict-mode`

**ä½œç”¨**: ç¡®ä¿ TypeScript ä»£ç ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼

**çº¦æŸè§„åˆ™**:

#### 4.1 tsconfig.json é…ç½®
```json
{
  "compilerOptions": {
    "strict": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitAny": true,
    "noImplicitThis": true,
    "alwaysStrict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true
  }
}
```

#### 4.2 ç±»å‹å®‰å…¨
```typescript
// âœ… æ­£ç¡®çš„ç±»å‹å®‰å…¨
function findDrama(id: string): Drama | null {
  const drama = dramas.find(d => d.id === id);
  return drama ?? null;
}

const drama = findDrama('123');
if (drama) {
  console.log(drama.title); // ç±»å‹å®ˆå«
}

// âŒ é”™è¯¯çš„ç±»å‹å®‰å…¨
function findDrama(id: any): any {
  return dramas.find(d => d.id === id);
}

const drama = findDrama('123');
console.log(drama.title); // å¯èƒ½ä¸º undefined
```

---

## æŠ€èƒ½å®æ–½æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: åˆ›å»ºæŠ€èƒ½æ–‡æ¡£ï¼ˆSteering Filesï¼‰

åœ¨ `.kiro/steering/` ç›®å½•ä¸‹åˆ›å»ºæŠ€èƒ½çº¦æŸæ–‡æ¡£ï¼š

```
.kiro/steering/
â”œâ”€â”€ nestjs-best-practices.md
â”œâ”€â”€ nestjs-ddd-patterns.md
â”œâ”€â”€ vue3-composition-patterns.md
â”œâ”€â”€ typescript-strict-mode.md
â””â”€â”€ code-quality-standards.md
```

æ¯ä¸ªæ–‡æ¡£åŒ…å«ï¼š
1. æŠ€èƒ½è¯´æ˜
2. çº¦æŸè§„åˆ™
3. ä»£ç ç¤ºä¾‹ï¼ˆæ­£ç¡® vs é”™è¯¯ï¼‰
4. æ£€æŸ¥æ¸…å•

### æ–¹æ¡ˆ 2: åœ¨ Spec ä¸­å¼•ç”¨æŠ€èƒ½

åœ¨åˆ›å»º Spec æ—¶ï¼Œæ˜ç¡®æŒ‡å®šä½¿ç”¨çš„æŠ€èƒ½ï¼š

```markdown
# Drama Module - Design

## æŠ€æœ¯çº¦æŸ

æœ¬æ¨¡å—å¿…é¡»éµå¾ªä»¥ä¸‹æŠ€èƒ½è§„èŒƒï¼š

### 1. NestJS æœ€ä½³å®è·µ
å‚è€ƒ: `.kiro/steering/nestjs-best-practices.md`

- âœ… ä½¿ç”¨ä¾èµ–æ³¨å…¥
- âœ… ä½¿ç”¨è£…é¥°å™¨
- âœ… ä½¿ç”¨å¼‚å¸¸è¿‡æ»¤å™¨
- âœ… ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿ
- âœ… ä½¿ç”¨é…ç½®ç®¡ç†

### 2. DDD åˆ†å±‚æ¶æ„
å‚è€ƒ: `.kiro/steering/nestjs-ddd-patterns.md`

- âœ… Entity åœ¨é¢†åŸŸå±‚
- âœ… Repository æ¥å£åœ¨é¢†åŸŸå±‚
- âœ… Repository å®ç°åœ¨åŸºç¡€è®¾æ–½å±‚
- âœ… Service åœ¨åº”ç”¨å±‚
- âœ… Controller åœ¨ API å±‚

### 3. TypeScript ä¸¥æ ¼æ¨¡å¼
å‚è€ƒ: `.kiro/steering/typescript-strict-mode.md`

- âœ… æ‰€æœ‰å‡½æ•°æœ‰æ˜ç¡®çš„è¿”å›ç±»å‹
- âœ… æ‰€æœ‰å‚æ•°æœ‰æ˜ç¡®çš„ç±»å‹
- âœ… ä¸ä½¿ç”¨ any ç±»å‹
- âœ… å¤„ç† null å’Œ undefined

## ä»£ç ç”Ÿæˆè¦æ±‚

ç”Ÿæˆä»£ç æ—¶ï¼Œå¿…é¡»ï¼š
1. æ£€æŸ¥æ˜¯å¦ç¬¦åˆä¸Šè¿°æŠ€èƒ½è§„èŒƒ
2. åŒ…å«å®Œæ•´çš„ç±»å‹å®šä¹‰
3. åŒ…å«é”™è¯¯å¤„ç†
4. åŒ…å«æ—¥å¿—è®°å½•
5. åŒ…å«å•å…ƒæµ‹è¯•
```

### æ–¹æ¡ˆ 3: ä»£ç å®¡æŸ¥æ¸…å•

åœ¨æ¯ä¸ª Spec çš„ tasks.md ä¸­æ·»åŠ å®¡æŸ¥ä»»åŠ¡ï¼š

```markdown
# Tasks

## Phase 1: å®ç°åŠŸèƒ½
- [ ] 1.1 åˆ›å»º Drama Entity
- [ ] 1.2 åˆ›å»º Drama Repository
- [ ] 1.3 åˆ›å»º Drama Service
- [ ] 1.4 åˆ›å»º Drama Controller

## Phase 2: ä»£ç å®¡æŸ¥ï¼ˆæŠ€èƒ½åˆè§„æ€§æ£€æŸ¥ï¼‰
- [ ] 2.1 æ£€æŸ¥ NestJS æœ€ä½³å®è·µåˆè§„æ€§
  - [ ] ä¾èµ–æ³¨å…¥æ­£ç¡®ä½¿ç”¨
  - [ ] è£…é¥°å™¨æ­£ç¡®ä½¿ç”¨
  - [ ] å¼‚å¸¸å¤„ç†å®Œæ•´
  - [ ] æ—¥å¿—è®°å½•å®Œæ•´
- [ ] 2.2 æ£€æŸ¥ DDD åˆ†å±‚æ¶æ„åˆè§„æ€§
  - [ ] Entity åœ¨æ­£ç¡®çš„å±‚
  - [ ] Repository æ¨¡å¼æ­£ç¡®
  - [ ] æœåŠ¡åˆ†å±‚æ­£ç¡®
- [ ] 2.3 æ£€æŸ¥ TypeScript ä¸¥æ ¼æ¨¡å¼åˆè§„æ€§
  - [ ] æ—  any ç±»å‹
  - [ ] ç±»å‹å®šä¹‰å®Œæ•´
  - [ ] Null å®‰å…¨å¤„ç†

## Phase 3: æµ‹è¯•
- [ ] 3.1 å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] 3.2 é›†æˆæµ‹è¯•é€šè¿‡
```

---

## æ‰§è¡Œæµç¨‹

### æ­¥éª¤ 1: åˆ›å»ºæŠ€èƒ½æ–‡æ¡£

```
@kiro åˆ›å»º NestJS æœ€ä½³å®è·µæŠ€èƒ½æ–‡æ¡£

å†…å®¹åŒ…æ‹¬ï¼š
1. æ¨¡å—ç»“æ„è§„èŒƒ
2. ä¾èµ–æ³¨å…¥è§„èŒƒ
3. è£…é¥°å™¨ä½¿ç”¨è§„èŒƒ
4. å¼‚å¸¸å¤„ç†è§„èŒƒ
5. æ—¥å¿—è§„èŒƒ
6. é…ç½®ç®¡ç†è§„èŒƒ

æ¯ä¸ªè§„èŒƒåŒ…å«ï¼š
- è¯´æ˜
- æ­£ç¡®ç¤ºä¾‹
- é”™è¯¯ç¤ºä¾‹
- æ£€æŸ¥æ¸…å•

ä¿å­˜åˆ°: .kiro/steering/nestjs-best-practices.md
```

### æ­¥éª¤ 2: åˆ›å»º Spec æ—¶å¼•ç”¨æŠ€èƒ½

```
@kiro åˆ›å»º Drama Module çš„ Spec

æŠ€æœ¯çº¦æŸï¼š
- å¿…é¡»éµå¾ª .kiro/steering/nestjs-best-practices.md
- å¿…é¡»éµå¾ª .kiro/steering/nestjs-ddd-patterns.md
- å¿…é¡»éµå¾ª .kiro/steering/typescript-strict-mode.md

åœ¨ design.md ä¸­æ˜ç¡®åˆ—å‡ºæŠ€èƒ½çº¦æŸ
åœ¨ tasks.md ä¸­æ·»åŠ æŠ€èƒ½åˆè§„æ€§æ£€æŸ¥ä»»åŠ¡
```

### æ­¥éª¤ 3: æ‰§è¡Œä»»åŠ¡æ—¶å¼ºè°ƒæŠ€èƒ½çº¦æŸ

```
@kiro æ‰§è¡Œ backend-drama-module spec çš„ä»»åŠ¡ 1.1

è¦æ±‚ï¼š
1. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-best-practices.md çš„è§„èŒƒ
2. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-ddd-patterns.md çš„è§„èŒƒ
3. ç”Ÿæˆä»£ç åï¼Œè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦ç¬¦åˆæŠ€èƒ½çº¦æŸ
4. å¦‚æœä¸ç¬¦åˆï¼Œè‡ªåŠ¨ä¿®æ­£
```

### æ­¥éª¤ 4: ä»£ç å®¡æŸ¥

```
@kiro å®¡æŸ¥ Drama Entity çš„ä»£ç 

æ£€æŸ¥é¡¹ï¼š
1. æ˜¯å¦ç¬¦åˆ .kiro/steering/nestjs-best-practices.md
2. æ˜¯å¦ç¬¦åˆ .kiro/steering/nestjs-ddd-patterns.md
3. æ˜¯å¦ç¬¦åˆ .kiro/steering/typescript-strict-mode.md

è¾“å‡ºï¼š
- åˆè§„æ€§æŠ¥å‘Š
- ä¸åˆè§„é¡¹åˆ—è¡¨
- ä¿®æ­£å»ºè®®
```

---

## æŠ€èƒ½æ–‡æ¡£æ¨¡æ¿

```markdown
# [æŠ€èƒ½åç§°]

## æŠ€èƒ½è¯´æ˜

[æŠ€èƒ½çš„ä½œç”¨å’Œç›®æ ‡]

## çº¦æŸè§„åˆ™

### è§„åˆ™ 1: [è§„åˆ™åç§°]

**è¯´æ˜**: [è§„åˆ™æè¿°]

**æ­£ç¡®ç¤ºä¾‹**:
\`\`\`typescript
// âœ… æ­£ç¡®çš„ä»£ç 
[ä»£ç ç¤ºä¾‹]
\`\`\`

**é”™è¯¯ç¤ºä¾‹**:
\`\`\`typescript
// âŒ é”™è¯¯çš„ä»£ç 
[ä»£ç ç¤ºä¾‹]
\`\`\`

**æ£€æŸ¥æ¸…å•**:
- [ ] [æ£€æŸ¥é¡¹ 1]
- [ ] [æ£€æŸ¥é¡¹ 2]

### è§„åˆ™ 2: [è§„åˆ™åç§°]
...

## éªŒè¯æ–¹æ³•

[å¦‚ä½•éªŒè¯ä»£ç æ˜¯å¦ç¬¦åˆæŠ€èƒ½è§„èŒƒ]

## å‚è€ƒèµ„æ–™

- [å®˜æ–¹æ–‡æ¡£é“¾æ¥]
- [æœ€ä½³å®è·µæ–‡ç« ]
```

---

## æ€»ç»“

é€šè¿‡æ„å»ºæŠ€èƒ½ä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

1. âœ… **æ ‡å‡†åŒ–ä»£ç è¾“å‡º** - æ‰€æœ‰ä»£ç éµå¾ªç»Ÿä¸€è§„èŒƒ
2. âœ… **æé«˜ä»£ç è´¨é‡** - è‡ªåŠ¨åº”ç”¨æœ€ä½³å®è·µ
3. âœ… **å‡å°‘é”™è¯¯** - é¿å…å¸¸è§çš„åæ¨¡å¼
4. âœ… **å¯è¿½æº¯æ€§** - æ¯ä¸ªæŠ€èƒ½éƒ½æœ‰æ–‡æ¡£æ”¯æ’‘
5. âœ… **å¯éªŒè¯æ€§** - æœ‰æ˜ç¡®çš„æ£€æŸ¥æ¸…å•

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼š
1. åˆ›å»ºæ ¸å¿ƒæŠ€èƒ½æ–‡æ¡£ï¼ˆnestjs-best-practices, nestjs-ddd-patterns ç­‰ï¼‰
2. åœ¨ Spec ä¸­å¼•ç”¨æŠ€èƒ½çº¦æŸ
3. æ‰§è¡Œä»»åŠ¡æ—¶å¼ºè°ƒæŠ€èƒ½åˆè§„æ€§
4. ä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥æŠ€èƒ½åˆè§„æ€§

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*åˆ›å»ºæ—¶é—´: 2026-02-06*  
*ç»´æŠ¤è€…: Refactor Team*
