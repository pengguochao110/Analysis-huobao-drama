# ğŸ¯ æŠ€èƒ½ä½“ç³» - å¿«é€Ÿå‚è€ƒ

## ğŸ“‹ ä»€ä¹ˆæ˜¯æŠ€èƒ½ä½“ç³»ï¼Ÿ

æŠ€èƒ½ä½“ç³»é€šè¿‡ **Steering Files**ï¼ˆæŠ€èƒ½çº¦æŸæ–‡æ¡£ï¼‰æ¥è§„èŒƒä»£ç è¾“å‡ºï¼Œç¡®ä¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆæœ€ä½³å®è·µå’Œé¡¹ç›®è§„èŒƒã€‚

---

## ğŸ¯ æ ¸å¿ƒæŠ€èƒ½æ¸…å•

### åç«¯æŠ€èƒ½

| æŠ€èƒ½åç§° | æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ä¼˜å…ˆçº§ |
|---------|---------|------|--------|
| **NestJS æœ€ä½³å®è·µ** | `.kiro/steering/nestjs-best-practices.md` | è§„èŒƒ NestJS ä»£ç ç»“æ„å’Œå†™æ³• | P0 |
| **NestJS DDD æ¨¡å¼** | `.kiro/steering/nestjs-ddd-patterns.md` | è§„èŒƒ DDD åˆ†å±‚æ¶æ„ | P0 |
| **TypeScript ä¸¥æ ¼æ¨¡å¼** | `.kiro/steering/typescript-strict-mode.md` | è§„èŒƒ TypeScript ç±»å‹ä½¿ç”¨ | P0 |

### å‰ç«¯æŠ€èƒ½

| æŠ€èƒ½åç§° | æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ä¼˜å…ˆçº§ |
|---------|---------|------|--------|
| **Vue 3 ç»„åˆå¼ API** | `.kiro/steering/vue3-composition-patterns.md` | è§„èŒƒ Vue 3 ä»£ç å†™æ³• | P0 |
| **å‰ç«¯ä»£ç è§„èŒƒ** | `.kiro/steering/frontend-code-standards.md` | è§„èŒƒå‰ç«¯ä»£ç è´¨é‡ | P1 |

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨æŠ€èƒ½çº¦æŸ

### åœºæ™¯ 1: åˆ›å»º Spec æ—¶å¼•ç”¨æŠ€èƒ½

```markdown
# Drama Module - Design

## æŠ€æœ¯çº¦æŸ

æœ¬æ¨¡å—å¿…é¡»éµå¾ªä»¥ä¸‹æŠ€èƒ½è§„èŒƒï¼š

### 1. NestJS æœ€ä½³å®è·µ
å‚è€ƒ: `.kiro/steering/nestjs-best-practices.md`

- âœ… ä½¿ç”¨ä¾èµ–æ³¨å…¥
- âœ… ä½¿ç”¨è£…é¥°å™¨
- âœ… ä½¿ç”¨å¼‚å¸¸è¿‡æ»¤å™¨
- âœ… ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿ

### 2. DDD åˆ†å±‚æ¶æ„
å‚è€ƒ: `.kiro/steering/nestjs-ddd-patterns.md`

- âœ… Entity åœ¨é¢†åŸŸå±‚
- âœ… Repository æ¥å£åœ¨é¢†åŸŸå±‚
- âœ… Repository å®ç°åœ¨åŸºç¡€è®¾æ–½å±‚
- âœ… Service åœ¨åº”ç”¨å±‚

### 3. TypeScript ä¸¥æ ¼æ¨¡å¼
å‚è€ƒ: `.kiro/steering/typescript-strict-mode.md`

- âœ… æ‰€æœ‰å‡½æ•°æœ‰æ˜ç¡®çš„è¿”å›ç±»å‹
- âœ… ä¸ä½¿ç”¨ any ç±»å‹
- âœ… å¤„ç† null å’Œ undefined
```

### åœºæ™¯ 2: ç”Ÿæˆä»£ç æ—¶å¼ºè°ƒæŠ€èƒ½çº¦æŸ

```
@kiro å®ç° Drama Service

è¦æ±‚ï¼š
1. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-best-practices.md
2. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-ddd-patterns.md
3. ç”Ÿæˆä»£ç åï¼Œè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦ç¬¦åˆæŠ€èƒ½çº¦æŸ
4. å¦‚æœä¸ç¬¦åˆï¼Œè‡ªåŠ¨ä¿®æ­£

è¾“å‡ºï¼š
- src/modules/drama/application/services/drama.service.ts
- src/modules/drama/application/services/drama.service.spec.ts
```

### åœºæ™¯ 3: ä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥åˆè§„æ€§

```
@kiro å®¡æŸ¥ Drama Service çš„ä»£ç 

æ£€æŸ¥é¡¹ï¼š
1. æ˜¯å¦ç¬¦åˆ .kiro/steering/nestjs-best-practices.md
2. æ˜¯å¦ç¬¦åˆ .kiro/steering/nestjs-ddd-patterns.md
3. æ˜¯å¦ç¬¦åˆ .kiro/steering/typescript-strict-mode.md

è¾“å‡ºï¼š
- åˆè§„æ€§æŠ¥å‘Š
- ä¸åˆè§„é¡¹åˆ—è¡¨
- ä¿®æ­£å»ºè®®
```

---

## ğŸ“ æŠ€èƒ½çº¦æŸæ–‡æ¡£ç»“æ„

æ¯ä¸ªæŠ€èƒ½çº¦æŸæ–‡æ¡£åŒ…å«ï¼š

```markdown
# [æŠ€èƒ½åç§°]

## æŠ€èƒ½è¯´æ˜
[æŠ€èƒ½çš„ä½œç”¨å’Œç›®æ ‡]

## çº¦æŸè§„åˆ™

### è§„åˆ™ 1: [è§„åˆ™åç§°]

**è¯´æ˜**: [è§„åˆ™æè¿°]

**æ­£ç¡®ç¤ºä¾‹**:
\`\`\`typescript
// âœ… æ­£ç¡®çš„ä»£ç 
[ä»£ç ç¤ºä¾‹]
\`\`\`

**é”™è¯¯ç¤ºä¾‹**:
\`\`\`typescript
// âŒ é”™è¯¯çš„ä»£ç 
[ä»£ç ç¤ºä¾‹]
\`\`\`

**æ£€æŸ¥æ¸…å•**:
- [ ] [æ£€æŸ¥é¡¹ 1]
- [ ] [æ£€æŸ¥é¡¹ 2]

## éªŒè¯æ–¹æ³•
[å¦‚ä½•éªŒè¯ä»£ç æ˜¯å¦ç¬¦åˆæŠ€èƒ½è§„èŒƒ]

## å‚è€ƒèµ„æ–™
- [å®˜æ–¹æ–‡æ¡£é“¾æ¥]
```

---

## ğŸ” NestJS æœ€ä½³å®è·µ - å¿«é€Ÿå‚è€ƒ

### æ¨¡å—ç»“æ„

```
src/modules/[module-name]/
â”œâ”€â”€ controllers/              # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ services/                 # æœåŠ¡å±‚
â”œâ”€â”€ repositories/             # ä»“å‚¨å±‚
â”œâ”€â”€ entities/                 # å®ä½“å®šä¹‰
â”œâ”€â”€ dto/                      # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ interfaces/               # æ¥å£å®šä¹‰
â”œâ”€â”€ constants/                # å¸¸é‡å®šä¹‰
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ [module].module.ts        # æ¨¡å—å®šä¹‰
```

### ä¾èµ–æ³¨å…¥

```typescript
// âœ… æ­£ç¡®
@Injectable()
export class DramaService {
  constructor(
    @InjectRepository(Drama)
    private readonly dramaRepository: Repository<Drama>,
  ) {}
}

// âŒ é”™è¯¯
export class DramaService {
  private dramaRepository = new Repository();
}
```

### æ§åˆ¶å™¨

```typescript
// âœ… æ­£ç¡®
@Controller('dramas')
@ApiTags('dramas')
export class DramaController {
  @Post()
  @ApiOperation({ summary: 'Create drama' })
  @ApiResponse({ status: 201, type: DramaResponseDto })
  async create(@Body() dto: CreateDramaDto): Promise<DramaResponseDto> {
    return this.dramaService.create(dto);
  }
}
```

### å¼‚å¸¸å¤„ç†

```typescript
// âœ… æ­£ç¡®
if (!drama) {
  throw new NotFoundException(`Drama with ID ${id} not found`);
}

// âŒ é”™è¯¯
if (!drama) {
  return null;
}
```

---

## ğŸ—ï¸ DDD åˆ†å±‚æ¶æ„ - å¿«é€Ÿå‚è€ƒ

### åˆ†å±‚ç»“æ„

```
src/modules/drama/
â”œâ”€â”€ api/                    # API å±‚
â”‚   â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ application/            # åº”ç”¨å±‚
â”‚   â””â”€â”€ services/
â”œâ”€â”€ domain/                 # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ repositories/       # æ¥å£
â”‚   â””â”€â”€ services/
â””â”€â”€ infrastructure/         # åŸºç¡€è®¾æ–½å±‚
    â””â”€â”€ repositories/       # å®ç°
```

### é¢†åŸŸå®ä½“

```typescript
// âœ… æ­£ç¡®ï¼šåŒ…å«é¢†åŸŸæ–¹æ³•
@Entity('dramas')
export class Drama {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  title: string;

  // é¢†åŸŸæ–¹æ³•
  publish(): void {
    if (this.status !== DramaStatus.DRAFT) {
      throw new DomainException('Only draft dramas can be published');
    }
    this.status = DramaStatus.PUBLISHED;
  }
}
```

### ä»“å‚¨æ¨¡å¼

```typescript
// 1. å®šä¹‰æ¥å£ï¼ˆé¢†åŸŸå±‚ï¼‰
export interface IDramaRepository {
  findById(id: string): Promise<Drama | null>;
  save(drama: Drama): Promise<Drama>;
}

// 2. å®ç°ï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰
@Injectable()
export class DramaRepository implements IDramaRepository {
  // å®ç°æ–¹æ³•
}

// 3. ä½¿ç”¨æ¥å£ï¼ˆåº”ç”¨å±‚ï¼‰
@Injectable()
export class DramaService {
  constructor(
    @Inject('IDramaRepository')
    private readonly dramaRepository: IDramaRepository,
  ) {}
}
```

---

## âœ… æ£€æŸ¥æ¸…å•

### åˆ›å»ºæ–°æ¨¡å—æ—¶

- [ ] ç›®å½•ç»“æ„ç¬¦åˆè§„èŒƒ
- [ ] ä½¿ç”¨ä¾èµ–æ³¨å…¥
- [ ] æ§åˆ¶å™¨æœ‰å®Œæ•´çš„è£…é¥°å™¨å’Œæ–‡æ¡£
- [ ] æœåŠ¡å±‚æœ‰å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—
- [ ] DTO æœ‰éªŒè¯è£…é¥°å™¨
- [ ] éµå¾ª DDD åˆ†å±‚æ¶æ„
- [ ] ä½¿ç”¨ä»“å‚¨æ¨¡å¼
- [ ] æ‰€æœ‰ç±»å‹æ˜ç¡®ï¼Œä¸ä½¿ç”¨ any
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### ä»£ç å®¡æŸ¥æ—¶

- [ ] æ£€æŸ¥æ˜¯å¦ç¬¦åˆ nestjs-best-practices.md
- [ ] æ£€æŸ¥æ˜¯å¦ç¬¦åˆ nestjs-ddd-patterns.md
- [ ] æ£€æŸ¥æ˜¯å¦ç¬¦åˆ typescript-strict-mode.md
- [ ] æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
- [ ] æ£€æŸ¥ä»£ç å¯è¯»æ€§

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æŠ€èƒ½ä½“ç³»è®¾è®¡](æŠ€èƒ½ä½“ç³»è®¾è®¡.md) - å®Œæ•´çš„æŠ€èƒ½ä½“ç³»è¯´æ˜
- [FAQ - å¸¸è§é—®é¢˜è§£ç­”](FAQ-å¸¸è§é—®é¢˜è§£ç­”.md) - Q4 è¯¦ç»†è¯´æ˜
- [NestJS æœ€ä½³å®è·µ](.kiro/steering/nestjs-best-practices.md) - å®Œæ•´è§„èŒƒ
- [NestJS DDD æ¨¡å¼](.kiro/steering/nestjs-ddd-patterns.md) - å®Œæ•´è§„èŒƒ

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: æŸ¥çœ‹æŠ€èƒ½çº¦æŸæ–‡æ¡£

```bash
# æŸ¥çœ‹ NestJS æœ€ä½³å®è·µ
cat .kiro/steering/nestjs-best-practices.md

# æŸ¥çœ‹ DDD æ¨¡å¼
cat .kiro/steering/nestjs-ddd-patterns.md
```

### æ­¥éª¤ 2: åˆ›å»º Spec æ—¶å¼•ç”¨æŠ€èƒ½

```
@kiro åˆ›å»º Drama Module çš„ Spec

æŠ€æœ¯çº¦æŸï¼š
- å¿…é¡»éµå¾ª .kiro/steering/nestjs-best-practices.md
- å¿…é¡»éµå¾ª .kiro/steering/nestjs-ddd-patterns.md

åœ¨ design.md ä¸­æ˜ç¡®åˆ—å‡ºæŠ€èƒ½çº¦æŸ
```

### æ­¥éª¤ 3: ç”Ÿæˆä»£ç æ—¶å¼ºè°ƒæŠ€èƒ½çº¦æŸ

```
@kiro æ‰§è¡Œ backend-drama-module spec çš„ä»»åŠ¡ 1.1

è¦æ±‚ï¼š
1. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-best-practices.md
2. ä¸¥æ ¼éµå¾ª .kiro/steering/nestjs-ddd-patterns.md
3. ç”Ÿæˆä»£ç åï¼Œè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦ç¬¦åˆæŠ€èƒ½çº¦æŸ
```

### æ­¥éª¤ 4: ä»£ç å®¡æŸ¥

```
@kiro å®¡æŸ¥ Drama Service çš„ä»£ç 

æ£€æŸ¥æ˜¯å¦ç¬¦åˆæ‰€æœ‰æŠ€èƒ½çº¦æŸ
è¾“å‡ºåˆè§„æ€§æŠ¥å‘Š
```

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*åˆ›å»ºæ—¶é—´: 2026-02-06*  
*ç»´æŠ¤è€…: Refactor Team*
