# 非功能需求说明书

## 火宝短剧 (Huobao Drama) AI短剧生成平台

**版本**: v1.0  
**日期**: 2025-02-03  
**状态**: 草案  

---

## 1. 性能需求

### 1.1 响应时间要求

#### NFR-PF-001 API响应时间
**描述**: 系统API的响应时间要求
**优先级**: 高

**验收标准** (EARS格式):
- WHEN 用户请求列表数据 THEN 系统 SHALL 在2秒内返回结果
- WHEN 用户提交表单数据 THEN 系统 SHALL 在1秒内确认接收
- WHEN 用户查询任务状态 THEN 系统 SHALL 在500毫秒内返回
- WHEN 用户请求静态文件 THEN 系统 SHALL 在300毫秒内响应
- WHEN 用户请求项目详情 THEN 系统 SHALL 在3秒内返回（含关联数据加载）

**测量方法**:
- 使用性能测试工具（如k6、JMeter）模拟API调用
- 测量P50、P95、P99响应时间
- 在标准测试数据集（1000个项目）上测试

#### NFR-PF-002 页面加载时间
**描述**: 前端页面的加载时间要求
**优先级**: 高

**验收标准**:
- WHEN 用户访问首页 THEN 首屏内容 SHALL 在2秒内渲染完成
- WHEN 用户切换路由 THEN 页面 SHALL 在1秒内完成导航
- WHEN 首次加载应用 THEN 完整应用 SHALL 在5秒内可交互
- WHEN 加载大型项目详情 THEN 页面 SHALL 在4秒内显示基础信息

**测量方法**:
- 使用Lighthouse进行性能审计
- 监控First Contentful Paint (FCP) < 1.5s
- 监控Time to Interactive (TTI) < 3.5s

#### NFR-PF-003 AI服务调用延迟
**描述**: AI服务调用的响应时间
**优先级**: 中

**验收标准**:
- WHEN 调用AI文本服务 THEN 系统 SHALL 在30秒内获得响应
- WHEN 调用AI图像服务 THEN 系统 SHALL 在120秒内获得响应
- WHEN 调用AI视频服务 THEN 系统 SHALL 在300秒内获得响应
- WHEN AI服务超时 THEN 系统 SHALL 在超时时限后标记任务失败

**超时配置**:
- 文本生成: 60秒
- 图像生成: 180秒
- 视频生成: 600秒

### 1.2 并发处理能力

#### NFR-PF-004 并发用户数
**描述**: 系统支持的并发用户数量
**优先级**: 中

**验收标准**:
- WHEN 50个用户同时访问系统 THEN 系统 SHALL 正常响应所有请求
- WHEN 100个用户同时在线 THEN 系统 SHALL 保持可用
- WHEN 并发超过100用户 THEN 系统 SHALL 排队处理请求
- WHEN 系统负载增加 THEN 响应时间 SHALL 增长不超过100%

**测试场景**:
- 50用户并发读取项目列表
- 20用户并发提交表单
- 10用户并发上传文件

#### NFR-PF-005 并行任务数
**描述**: 系统并行处理AI生成任务的能力
**优先级**: 高

**验收标准**:
- WHEN 批量生成任务提交 THEN 系统 SHALL 最多并行处理10个图像生成
- WHEN 视频生成任务提交 THEN 系统 SHALL 最多并行处理3个视频生成
- WHEN 任务队列超过限制 THEN 系统 SHALL 将任务放入队列等待
- WHEN 任务完成 THEN 系统 SHALL 自动从队列获取下一个任务

**队列配置**:
- 图像生成队列: 最大并发10，队列长度100
- 视频生成队列: 最大并发3，队列长度50
- 视频合成队列: 最大并发2，队列长度20

#### NFR-PF-006 数据库连接池
**描述**: 数据库连接池的配置
**优先级**: 中

**验收标准**:
- WHEN 系统启动 THEN 数据库连接池 SHALL 初始化最小5个连接
- WHEN 并发查询增加 THEN 连接池 SHALL 扩展到最大20个连接
- WHEN 连接空闲超过5分钟 THEN 连接 SHALL 被回收
- WHEN 连接数达到上限 THEN 新请求 SHALL 排队等待

**连接池配置**:
```yaml
max_idle: 5
max_open: 20
max_lifetime: 3600s
```

### 1.3 资源使用限制

#### NFR-PF-007 内存使用
**描述**: 系统运行时的内存使用限制
**优先级**: 中

**验收标准**:
- WHEN 系统正常运行 THEN 内存使用 SHALL 不超过4GB
- WHEN 视频合成进行时 THEN 内存使用 SHALL 不超过8GB
- WHEN 批量任务执行时 THEN 系统 SHALL 控制并发数以限制内存
- WHEN 内存使用超过90% THEN 系统 SHALL 触发告警

**内存分配**:
- 应用服务器: 2GB
- 视频处理 (FFmpeg): 4GB
- 缓存: 1GB
- 系统保留: 1GB

#### NFR-PF-008 CPU使用
**描述**: 系统运行时的CPU使用限制
**优先级**: 低

**验收标准**:
- WHEN 系统空闲 THEN CPU使用率 SHALL 低于5%
- WHEN 处理正常请求 THEN CPU使用率 SHALL 低于50%
- WHEN 视频合成进行时 THEN CPU使用率 SHALL 根据配置限制
- WHEN CPU使用超过80%持续5分钟 THEN 系统 SHALL 记录告警日志

#### NFR-PF-009 存储使用
**描述**: 存储空间的使用限制
**优先级**: 中

**验收标准**:
- WHEN 上传文件 THEN 单个文件 SHALL 不超过500MB
- WHEN 存储空间使用超过80% THEN 系统 SHALL 发送告警
- WHEN 存储空间使用超过90% THEN 系统 SHALL 拒绝新的上传请求
- WHEN 临时文件创建 THEN 系统 SHALL 在任务完成后自动清理

**存储配额**:
- 项目缩略图: 10MB/项目
- 角色图像: 50MB/角色
- 场景图像: 50MB/场景
- 分镜图像: 100MB/分镜
- 生成视频: 100MB/分钟

### 1.4 吞吐量要求

#### NFR-PF-010 API吞吐量
**描述**: API接口的吞吐量要求
**优先级**: 中

**验收标准**:
- WHEN 标准查询接口 THEN 系统 SHALL 支持100 TPS
- WHEN 写入接口 THEN 系统 SHALL 支持50 TPS
- WHEN 文件上传接口 THEN 系统 SHALL 支持10 TPS
- WHEN 流量突增 THEN 系统 SHALL 在10秒内自动扩展

**测试指标**:
- 平均响应时间 < 500ms
- 错误率 < 0.1%
- 吞吐量 > 100 RPS (Requests Per Second)

---

## 2. 可用性需求

### 2.1 系统可用率

#### NFR-AV-001 服务可用性
**描述**: 系统正常运行时间要求
**优先级**: 高

**验收标准**:
- WHEN 系统部署运行 THEN 可用率 SHALL 达到99.5%
- WHEN 计算月度可用率 THEN 停机时间 SHALL 不超过3.6小时/月
- WHEN 发生非计划停机 THEN 系统 SHALL 在5分钟内自动重启
- WHEN 计划维护 THEN 系统 SHALL 提前24小时通知用户

**可用性计算**:
```
可用率 = (总时间 - 停机时间) / 总时间 × 100%
目标: 99.5% (月度停机时间 < 3.6小时)
```

#### NFR-AV-002 服务降级
**描述**: 系统在服务异常时的降级策略
**优先级**: 高

**验收标准**:
- WHEN AI服务不可用时 THEN 系统 SHALL 返回友好错误信息
- WHEN 数据库连接失败 THEN 系统 SHALL 返回503状态码并尝试重连
- WHEN 文件存储不可用时 THEN 系统 SHALL 暂停文件相关功能
- WHEN 核心功能不可用时 THEN 系统 SHALL 显示维护页面

**降级策略**:
1. AI服务异常: 允许查看现有内容，禁用生成功能
2. 数据库异常: 返回缓存数据（如可用），否则显示错误
3. 存储异常: 允许操作元数据，禁用文件上传/下载

### 2.2 恢复时间目标

#### NFR-AV-003 恢复时间目标 (RTO)
**描述**: 系统故障后的恢复时间
**优先级**: 高

**验收标准**:
- WHEN 系统崩溃 THEN 系统 SHALL 在5分钟内自动恢复
- WHEN 数据库故障 THEN 系统 SHALL 在15分钟内切换到备用实例
- WHEN 服务器硬件故障 THEN 系统 SHALL 在30分钟内迁移到备用服务器
- WHEN 数据中心故障 THEN 系统 SHALL 在4小时内切换到备用数据中心

**RTO指标**:
- 应用服务: 5分钟
- 数据库服务: 15分钟
- 基础设施: 30分钟
- 灾难恢复: 4小时

#### NFR-AV-004 恢复点目标 (RPO)
**描述**: 系统故障时的数据丢失容忍度
**优先级**: 高

**验收标准**:
- WHEN 系统故障 THEN 数据丢失 SHALL 不超过1小时
- WHEN 数据库故障 THEN 系统 SHALL 恢复到最近的备份点
- WHEN 事务正在进行 THEN 系统 SHALL 支持事务回滚
- WHEN 异步任务失败 THEN 系统 SHALL 允许从断点继续

**RPO指标**:
- 结构化数据: 1小时（每小时备份）
- 生成的媒体文件: 24小时（每日备份）
- 用户上传文件: 实时（写入时复制）

### 2.3 容错与自愈

#### NFR-AV-005 自动恢复
**描述**: 系统的自动故障恢复能力
**优先级**: 中

**验收标准**:
- WHEN 服务进程崩溃 THEN 系统 SHALL 自动重启服务
- WHEN 数据库连接断开 THEN 系统 SHALL 自动重连（最多5次）
- WHEN AI服务调用失败 THEN 系统 SHALL 重试（最多3次，间隔5秒）
- WHEN 任务处理失败 THEN 系统 SHALL 标记失败并记录原因

**重试策略**:
```yaml
数据库重连: 5次，间隔10秒
AI服务重试: 3次，间隔5秒
文件上传重试: 3次，指数退避
```

#### NFR-AV-006 健康检查
**描述**: 系统的健康检查机制
**优先级**: 中

**验收标准**:
- WHEN 访问健康检查接口 THEN 系统 SHALL 返回各组件状态
- WHEN 组件异常 THEN 健康检查 SHALL 反映异常状态
- WHEN 健康检查失败 THEN 系统 SHALL 触发告警通知
- WHEN 外部依赖异常 THEN 系统 SHALL 在健康状态中说明

**健康检查端点**:
- `/health` - 整体健康状态
- `/health/db` - 数据库连接状态
- `/health/storage` - 存储服务状态
- `/health/ai` - AI服务状态

---

## 3. 安全性需求

### 3.1 认证与授权

#### NFR-SE-001 API密钥保护
**描述**: AI服务API密钥的安全存储
**优先级**: 高

**验收标准**:
- WHEN 存储API密钥 THEN 系统 SHALL 使用AES-256加密
- WHEN 返回配置信息 THEN 系统 SHALL 脱敏显示（只显示前4位和后4位）
- WHEN 配置文件存储 THEN 系统 SHALL 设置文件权限为600
- WHEN 密钥被访问 THEN 系统 SHALL 记录访问日志

**加密配置**:
```yaml
encryption:
  algorithm: AES-256-GCM
  key_rotation: 90d
  at_rest: true
  in_transit: true
```

#### NFR-SE-002 输入验证
**描述**: 对用户输入的验证和清理
**优先级**: 高

**验收标准**:
- WHEN 用户提交表单 THEN 系统 SHALL 验证数据类型和长度
- WHEN 用户输入包含特殊字符 THEN 系统 SHALL 进行转义或拒绝
- WHEN SQL查询 THEN 系统 SHALL 使用参数化查询
- WHEN 文件上传 THEN 系统 SHALL 验证文件类型和大小

**验证规则**:
- 标题: 1-100字符，不允许HTML标签
- 描述: 最大10000字符，允许安全的HTML子集
- 文件名: 不允许路径遍历字符 (../)
- 文件类型: 白名单机制 (jpg, png, mp4等)

#### NFR-SE-003 速率限制
**描述**: 防止API滥用的速率限制
**优先级**: 中

**验收标准**:
- WHEN API请求超过限制 THEN 系统 SHALL 返回429状态码
- WHEN 请求频率过高 THEN 系统 SHALL 限制请求并提示等待时间
- WHEN 管理员调整限制 THEN 配置 SHALL 在1分钟内生效
- WHEN 限速触发 THEN 系统 SHALL 记录到安全日志

**速率限制配置**:
```yaml
rate_limits:
  default: 100/minute
  upload: 10/minute
  ai_generation: 20/minute
  burst: 10
```

### 3.2 数据保护

#### NFR-SE-004 敏感数据保护
**描述**: 敏感数据的存储和传输保护
**优先级**: 高

**验收标准**:
- WHEN 传输敏感数据 THEN 系统 SHALL 使用HTTPS/TLS 1.3
- WHEN 存储用户数据 THEN 系统 SHALL 加密存储
- WHEN 显示日志 THEN 系统 SHALL 脱敏处理敏感信息
- WHEN 导出数据 THEN 系统 SHALL 提供加密选项

**TLS配置**:
- 最小版本: TLS 1.2
- 推荐版本: TLS 1.3
- 证书有效期监控: 30天预警

#### NFR-SE-005 审计日志
**描述**: 关键操作的审计记录
**优先级**: 中

**验收标准**:
- WHEN 用户创建项目 THEN 系统 SHALL 记录操作日志
- WHEN 用户删除数据 THEN 系统 SHALL 记录删除详情
- WHEN 用户修改配置 THEN 系统 SHALL 记录变更前后值
- WHEN 查看审计日志 THEN 日志 SHALL 包含时间、用户、操作、结果

**审计事件**:
- 项目创建/修改/删除
- 角色修改
- AI配置变更
- 文件上传/删除
- 登录/登出事件

### 3.3 错误处理

#### NFR-SE-006 错误信息
**描述**: 错误信息的安全处理
**优先级**: 高

**验收标准**:
- WHEN 发生系统错误 THEN 返回给用户的错误信息 SHALL 不包含堆栈跟踪
- WHEN 数据库错误 THEN 错误信息 SHALL 不暴露数据库结构
- WHEN AI服务错误 THEN 错误信息 SHALL 经过处理后再返回
- WHEN 文件操作失败 THEN 错误信息 SHALL 不暴露文件系统路径

**错误信息分级**:
- 用户界面: 友好的错误提示
- API响应: 标准错误码和简要描述
- 系统日志: 完整的错误详情和堆栈跟踪

---

## 4. 可维护性需求

### 4.1 日志记录

#### NFR-MT-001 日志级别和格式
**描述**: 系统日志的记录规范
**优先级**: 高

**验收标准**:
- WHEN 系统运行 THEN 日志 SHALL 包含时间戳、级别、消息、上下文
- WHEN 错误发生时 THEN 日志 SHALL 包含堆栈跟踪
- WHEN AI服务调用 THEN 日志 SHALL 记录请求和响应摘要
- WHEN 性能关键操作 THEN 日志 SHALL 记录执行时间

**日志级别**:
- DEBUG: 详细的调试信息（开发环境）
- INFO: 正常操作信息
- WARN: 警告信息，不影响功能
- ERROR: 错误信息，功能受影响
- FATAL: 致命错误，系统无法继续

**日志格式**:
```
2025-02-03 10:30:45 | INFO | [drama-service] Drama created | drama_id=123 title="Test Drama"
2025-02-03 10:31:02 | ERROR | [ai-client] Image generation failed | provider=openai error="timeout"
```

#### NFR-MT-002 日志轮转和归档
**描述**: 日志文件的管理策略
**优先级**: 中

**验收标准**:
- WHEN 日志文件超过100MB THEN 系统 SHALL 自动轮转
- WHEN 日志超过30天 THEN 系统 SHALL 自动归档
- WHEN 磁盘空间不足 THEN 系统 SHALL 清理最旧的日志
- WHEN 需要查看历史日志 THEN 系统 SHALL 支持按日期检索

**日志配置**:
```yaml
logging:
  max_size: 100MB
  max_age: 30d
  max_backups: 10
  compress: true
  level: info
```

### 4.2 监控和告警

#### NFR-MT-003 系统监控
**描述**: 系统运行状态的监控
**优先级**: 中

**验收标准**:
- WHEN 系统运行时 THEN 关键指标 SHALL 被采集（CPU、内存、磁盘）
- WHEN API被调用 THEN 响应时间和状态码 SHALL 被记录
- WHEN 错误率超过阈值 THEN 系统 SHALL 发送告警
- WHEN 存储空间不足 THEN 系统 SHALL 提前告警

**监控指标**:
- 系统指标: CPU、内存、磁盘、网络
- 应用指标: 请求数、响应时间、错误率
- 业务指标: 项目数、生成任务数、成功率

#### NFR-MT-004 告警机制
**描述**: 系统告警的通知机制
**优先级**: 中

**验收标准**:
- WHEN 触发告警条件 THEN 系统 SHALL 在1分钟内发送通知
- WHEN 告警持续 THEN 系统 SHALL 支持告警升级
- WHEN 告警恢复 THEN 系统 SHALL 发送恢复通知
- WHEN 配置告警规则 THEN 规则 SHALL 立即生效

**告警渠道**:
- 邮件通知
- Webhook（支持企业微信、钉钉等）
- 系统内通知

### 4.3 配置管理

#### NFR-MT-005 配置热更新
**描述**: 配置文件的动态更新
**优先级**: 中

**验收标准**:
- WHEN 配置文件修改 THEN 系统 SHALL 在30秒内检测变更
- WHEN 配置验证通过 THEN 新配置 SHALL 自动生效
- WHEN 配置格式错误 THEN 系统 SHALL 拒绝更新并记录错误
- WHEN 配置更新失败 THEN 系统 SHALL 回退到上一版本

**可热更新配置**:
- 日志级别
- 速率限制
- AI服务配置
- 功能开关

#### NFR-MT-006 环境变量支持
**描述**: 系统支持环境变量配置
**优先级**: 中

**验收标准**:
- WHEN 环境变量设置 THEN 系统 SHALL 优先使用环境变量
- WHEN 环境变量未设置 THEN 系统 SHALL 使用配置文件
- WHEN 环境变量格式错误 THEN 系统 SHALL 记录警告并使用默认值
- WHEN 敏感配置 THEN 系统 SHALL 支持从环境变量读取

**环境变量列表**:
- `HUOBAO_DEBUG` - 调试模式
- `HUOBAO_PORT` - 服务端口
- `HUOBAO_DB_PATH` - 数据库路径
- `HUOBAO_STORAGE_PATH` - 存储路径
- `HUOBAO_LOG_LEVEL` - 日志级别

### 4.4 备份与恢复

#### NFR-MT-007 数据备份
**描述**: 系统和数据的备份策略
**优先级**: 高

**验收标准**:
- WHEN 数据库运行时 THEN 系统 SHALL 每小时自动备份
- WHEN 媒体文件生成 THEN 系统 SHALL 每日增量备份
- WHEN 备份完成 THEN 系统 SHALL 验证备份完整性
- WHEN 备份失败 THEN 系统 SHALL 发送告警并重试

**备份策略**:
- 数据库: 每小时全量备份，保留7天
- 配置文件: 每次修改后备份，保留30天
- 媒体文件: 每日增量备份，每周全量备份，保留30天
- 日志文件: 每月归档，保留1年

#### NFR-MT-008 灾难恢复
**描述**: 系统的灾难恢复能力
**优先级**: 高

**验收标准**:
- WHEN 需要从备份恢复 THEN 系统 SHALL 支持一键恢复
- WHEN 恢复进行时 THEN 系统 SHALL 显示进度和预计时间
- WHEN 恢复完成 THEN 系统 SHALL 验证数据完整性
- WHEN 部分恢复失败 THEN 系统 SHALL 支持断点续传

**恢复流程**:
1. 停止应用服务
2. 恢复数据库
3. 恢复配置文件
4. 恢复媒体文件（可选）
5. 验证数据完整性
6. 启动应用服务

---

## 5. 兼容性需求

### 5.1 浏览器兼容性

#### NFR-CM-001 现代浏览器支持
**描述**: 前端界面对现代浏览器的支持
**优先级**: 高

**验收标准**:
- WHEN 用户使用Chrome 90+ THEN 所有功能 SHALL 正常工作
- WHEN 用户使用Firefox 88+ THEN 所有功能 SHALL 正常工作
- WHEN 用户使用Safari 14+ THEN 所有功能 SHALL 正常工作
- WHEN 用户使用Edge 90+ THEN 所有功能 SHALL 正常工作
- WHEN 使用不支持的浏览器 THEN 系统 SHALL 显示兼容性提示

**测试矩阵**:
| 浏览器 | 版本 | 支持级别 |
|-------|------|---------|
| Chrome | 90+ | 完全支持 |
| Firefox | 88+ | 完全支持 |
| Safari | 14+ | 完全支持 |
| Edge | 90+ | 完全支持 |

### 5.2 数据库兼容性

#### NFR-CM-002 多数据库支持
**描述**: 后端对多种数据库的支持
**优先级**: 中

**验收标准**:
- WHEN 使用SQLite THEN 所有功能 SHALL 正常工作
- WHEN 使用MySQL 8.0+ THEN 所有功能 SHALL 正常工作
- WHEN 数据库迁移 THEN 系统 SHALL 自动执行迁移脚本
- WHEN 切换数据库 THEN 数据 SHALL 可无损迁移

**支持的数据库**:
- SQLite 3.35+ (开发/小规模部署)
- MySQL 8.0+ (生产环境)
- PostgreSQL 13+ (未来支持)

### 5.3 API兼容性

#### NFR-CM-003 API版本控制
**描述**: API的版本管理策略
**优先级**: 中

**验收标准**:
- WHEN 访问API THEN 路径 SHALL 包含版本号（如 /api/v1/）
- WHEN API变更 THEN 系统 SHALL 保持向后兼容至少3个月
- WHEN API弃用 THEN 系统 SHALL 提前30天通知
- WHEN 破坏性变更 THEN 系统 SHALL 发布新版本API

**API版本策略**:
- URL版本控制: `/api/v1/`, `/api/v2/`
- 向后兼容: 小版本更新保持兼容
- 弃用通知: 提前30天在响应头中添加警告

---

## 6. 可扩展性需求

### 6.1 水平扩展

#### NFR-EX-001 应用扩展
**描述**: 应用服务器的水平扩展能力
**优先级**: 低

**验收标准**:
- WHEN 负载增加 THEN 系统 SHALL 支持部署多个实例
- WHEN 多实例部署 THEN 系统 SHALL 使用共享存储
- WHEN 数据库瓶颈 THEN 系统 SHALL 支持读写分离
- WHEN 需要扩展 THEN 系统 SHALL 支持无状态部署

**扩展架构**:
- 应用层: 无状态设计，支持水平扩展
- 存储层: 使用共享存储（MinIO/S3）
- 数据库层: 读写分离（未来支持）

### 6.2 插件扩展

#### NFR-EX-002 AI服务扩展
**描述**: 支持新的AI服务提供商
**优先级**: 中

**验收标准**:
- WHEN 添加新AI提供商 THEN 系统 SHALL 通过配置即可支持
- WHEN 新提供商接口不同 THEN 系统 SHALL 使用适配器模式
- WHEN 切换提供商 THEN 系统 SHALL 不需要重启
- WHEN 新提供商失败 THEN 系统 SHALL 优雅降级

**扩展点**:
- 文本生成提供商
- 图像生成提供商
- 视频生成提供商

---

## 7. 国际化需求

### 7.1 多语言支持

#### NFR-I18N-001 界面国际化
**描述**: 系统界面的多语言支持
**优先级**: 中

**验收标准**:
- WHEN 切换语言 THEN 界面 SHALL 实时更新
- WHEN 显示文本 THEN 系统 SHALL 使用当前语言
- WHEN 语言文件缺失 THEN 系统 SHALL 回退到默认语言
- WHEN 新增语言 THEN 系统 SHALL 通过添加语言文件支持

**支持语言**:
- 中文 (zh-CN) - 默认
- 英文 (en-US)
- （可扩展）

#### NFR-I18N-002 数据国际化
**描述**: 用户数据的国际化处理
**优先级**: 低

**验收标准**:
- WHEN 存储用户内容 THEN 系统 SHALL 支持Unicode
- WHEN 显示时间 THEN 系统 SHALL 根据时区格式化
- WHEN 显示数字 THEN 系统 SHALL 根据地区格式化

---

## 验收标准汇总表

| 类别 | 需求ID | EARS格式验收标准 | 优先级 |
|-----|--------|-----------------|--------|
| 性能 | NFR-PF-001 | WHEN 请求列表数据 THEN 系统 SHALL 在2秒内返回 | 高 |
| 性能 | NFR-PF-004 | WHEN 50个用户同时访问 THEN 系统 SHALL 正常响应 | 中 |
| 性能 | NFR-PF-005 | WHEN 批量任务提交 THEN 系统 SHALL 最多并行处理10个 | 高 |
| 可用性 | NFR-AV-001 | WHEN 系统部署运行 THEN 可用率 SHALL 达到99.5% | 高 |
| 可用性 | NFR-AV-003 | WHEN 系统崩溃 THEN 系统 SHALL 在5分钟内恢复 | 高 |
| 可用性 | NFR-AV-004 | WHEN 系统故障 THEN 数据丢失 SHALL 不超过1小时 | 高 |
| 安全性 | NFR-SE-001 | WHEN 存储API密钥 THEN 系统 SHALL 使用AES-256加密 | 高 |
| 安全性 | NFR-SE-002 | WHEN 用户提交表单 THEN 系统 SHALL 验证数据 | 高 |
| 安全性 | NFR-SE-003 | WHEN 请求超过限制 THEN 系统 SHALL 返回429 | 中 |
| 可维护性 | NFR-MT-001 | WHEN 系统运行 THEN 日志 SHALL 包含时间戳和上下文 | 高 |
| 可维护性 | NFR-MT-007 | WHEN 数据库运行时 THEN 系统 SHALL 每小时备份 | 高 |
| 兼容性 | NFR-CM-001 | WHEN 用户使用Chrome 90+ THEN 所有功能 SHALL 正常 | 高 |

---

**文档结束**
