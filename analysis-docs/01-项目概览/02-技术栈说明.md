# 02-技术栈说明

## 技术栈总览

火宝短剧平台采用前后端分离架构，结合多种AI服务提供商。

---

## 后端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| **Go** | 1.23+ | 后端开发语言 |
| **Gin** | v1.9.1 | Web框架 |
| **GORM** | v1.30.0 | ORM框架 |
| **SQLite** | v1.34.4 (modernc.org) | 数据库（纯Go驱动） |
| **Zap** | v1.26.0 | 日志框架 |
| **Viper** | v1.17.0 | 配置管理 |
| **Cron** | v3.0.1 | 定时任务 |
| **FFmpeg** | 4.0+ | 视频处理 |

### 后端架构特点

- **DDD分层架构**：api/application/domain/infrastructure 四层分离
- **依赖注入**：通过构造函数注入依赖
- **RESTful API**：标准的REST接口设计
- **Repository模式**：通过GORM实现数据访问

---

## 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| **Vue** | 3.4+ | 前端框架 |
| **TypeScript** | 5.3+ | 开发语言 |
| **Vite** | 5.0+ | 构建工具 |
| **Element Plus** | 2.5+ | UI组件库 |
| **TailwindCSS** | 4.1+ | CSS框架 |
| **Pinia** | 2.1+ | 状态管理 |
| **Vue Router** | 4.2+ | 路由管理 |
| **Vue i18n** | 9.14+ | 国际化 |
| **FFmpeg.wasm** | 0.12+ | 前端视频处理 |

### 前端架构特点

- **组件化设计**：基于Vue 3的组合式API
- **响应式布局**：支持桌面和移动端
- **国际化支持**：中文/英文/日文
- **状态管理**：Pinia集中管理应用状态

---

## AI服务集成

| 服务商 | 能力 |
|--------|------|
| **OpenAI** | 文本生成（GPT）、图像生成（DALL-E）、视频生成（Sora） |
| **Google Gemini** | 文本/图像生成 |
| **字节跳动豆包** | 视频生成 |
| **火山引擎** | 图像/视频生成 |
| **MiniMax** | 视频生成 |

### AI服务架构

- **Provider模式**：支持多提供商动态切换
- **配置化管理**：API Key和参数通过Web UI配置
- **容错机制**：支持服务降级和重试

---

## 数据库与存储

### 数据库
- **类型**：SQLite（纯Go实现，无需CGO）
- **ORM**：GORM
- **特性**：
  - WAL模式（Write-Ahead Logging）优化并发
  - 自动迁移（AutoMigrate）
  - 支持MySQL/PostgreSQL迁移路径

### 存储策略
- **本地存储**：默认使用本地文件系统
- **本地缓存**：外部资源自动下载到本地
- **目录结构**：
  ```
  data/storage/
  ├── images/          # 场景、分镜图片
  ├── characters/      # 角色图片
  ├── videos/          # 生成的视频
  └── uploads/         # 用户上传文件
  ```

---

## 开发工具

### 后端开发
- **包管理**：Go Modules
- **代码规范**：go fmt, golint
- **测试**：Go test, testify

### 前端开发
- **包管理**：pnpm
- **代码规范**：ESLint, Prettier
- **类型检查**：TypeScript

### 部署工具
- **Docker**：多阶段构建，支持跨平台
- **Docker Compose**：一键部署
- **Nginx**：反向代理和静态文件服务

---

## 技术选型理由

| 技术 | 选择理由 |
|------|---------|
| **Go** | 高性能、编译型语言、强大的并发支持 |
| **Vue 3** | 组合式API、TypeScript支持好、生态丰富 |
| **SQLite** | 零配置、文件级数据库、适合单机部署 |
| **GORM** | 功能丰富、支持多种数据库、社区活跃 |
| **Element Plus** | 组件丰富、文档完善、企业级UI |
| **FFmpeg** | 视频处理行业标准、功能完整 |

---

## 版本兼容性

### 最小要求
- **Go**: 1.23+
- **Node.js**: 18+
- **npm/pnpm**: 9+
- **FFmpeg**: 4.0+

### 推荐配置
- **Go**: 1.23+
- **Node.js**: 20 LTS
- **pnpm**: 9+
- **FFmpeg**: 6.0+

---

## 外部依赖

### 系统依赖
- **FFmpeg**：必须安装并配置环境变量
- **Git**：版本控制
- **Make**（可选）：构建自动化

### AI服务
- **OpenAI API Key**：文本和图像生成
- **豆包 API Key**：视频生成
- **其他AI服务**：根据需求配置

---

*详见：`
